<div class="list-container">
  <div class="search-section">
    <h1 class="page-title">Discover Books</h1>
    <div class="search-bar">
      <input 
        type="text" 
        [(ngModel)]="searchQuery" 
        (input)="onSearchInput()"
        placeholder="Search for books..."
        class="search-input">
    </div>
    
    <div class="controls">
      <div class="items-per-page">
        <label>Items per page:</label>
        <select [(ngModel)]="itemsPerPage" (change)="onItemsPerPageChange(itemsPerPage)">
          <option [value]="5">5</option>
          <option [value]="10">10</option>
          <option [value]="20">20</option>
          <option [value]="40">40</option>
        </select>
      </div>
    </div>
  </div>

  @if (isLoading$ | async) {
    <div class="loading">
      <div class="spinner"></div>
      <p>Loading books...</p>
    </div>
  }

  @if ((errorMessage$ | async) && !(isLoading$ | async)) {
    <div class="error">
      <p>{{ errorMessage$ | async }}</p>
    </div>
  }

  @if (!(isLoading$ | async) && !(errorMessage$ | async)) {
    <div class="books-grid">
      @for (book of books$ | async; track book.id) {
        <app-item-card [book]="book"></app-item-card>
      }
    </div>
  }

  @if (!(isLoading$ | async) && (books$ | async)?.length! > 0) {
    <div class="pagination">
      <button 
        (click)="previousPage()" 
        [disabled]="currentPage === 0"
        class="pagination-btn">
        ← Previous
      </button>
      <span class="page-info">Page {{ currentPage + 1 }}</span>
      <button 
        (click)="nextPage()" 
        class="pagination-btn">
        Next →
      </button>
    </div>
  }

  @if (!(isLoading$ | async) && (books$ | async)?.length === 0 && !(errorMessage$ | async)) {
    <div class="no-results">
      <p>No books found. Try a different search term.</p>
    </div>
  }
</div>